function isRouterContext(value) {
    return "params" in value;
}
export function getQuery(ctx, { mergeParams, asMap } = {}) {
    const result = {};
    if (mergeParams && isRouterContext(ctx)) {
        Object.assign(result, ctx.params);
    }
    for (const [key, value] of ctx.request.url.searchParams) {
        result[key] = value;
    }
    return asMap ? new Map(Object.entries(result)) : result;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVscGVycy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImhlbHBlcnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBS0EsU0FBUyxlQUFlLENBQUMsS0FBYztJQUNyQyxPQUFPLFFBQVEsSUFBSSxLQUFLLENBQUM7QUFDM0IsQ0FBQztBQThCRCxNQUFNLFVBQVUsUUFBUSxDQUN0QixHQUE0QixFQUM1QixFQUFFLFdBQVcsRUFBRSxLQUFLLEtBQXVCLEVBQUU7SUFFN0MsTUFBTSxNQUFNLEdBQTJCLEVBQUUsQ0FBQztJQUMxQyxJQUFJLFdBQVcsSUFBSSxlQUFlLENBQUMsR0FBRyxDQUFDLEVBQUU7UUFDdkMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0tBQ25DO0lBQ0QsS0FBSyxNQUFNLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxJQUFJLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBRTtRQUN2RCxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsS0FBSyxDQUFDO0tBQ3JCO0lBQ0QsT0FBTyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO0FBQzFELENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOC0yMDIwIHRoZSBvYWsgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4gTUlUIGxpY2Vuc2UuXG5cbmltcG9ydCB0eXBlIHsgQ29udGV4dCB9IGZyb20gXCIuL2NvbnRleHQudHNcIjtcbmltcG9ydCB0eXBlIHsgUm91dGVyQ29udGV4dCB9IGZyb20gXCIuL3JvdXRlci50c1wiO1xuXG5mdW5jdGlvbiBpc1JvdXRlckNvbnRleHQodmFsdWU6IENvbnRleHQpOiB2YWx1ZSBpcyBSb3V0ZXJDb250ZXh0IHtcbiAgcmV0dXJuIFwicGFyYW1zXCIgaW4gdmFsdWU7XG59XG5cbmludGVyZmFjZSBHZXRRdWVyeU9wdGlvbnNCYXNlIHtcbiAgLyoqIFRoZSByZXR1cm4gdmFsdWUgc2hvdWxkIGJlIGEgYE1hcGAgaW5zdGVhZCBvZiBhIHJlY29yZCBvYmplY3QuICovXG4gIGFzTWFwPzogYm9vbGVhbjtcblxuICAvKiogTWVyZ2UgaW4gdGhlIGNvbnRleHQncyBgLnBhcmFtc2AuICBUaGlzIG9ubHkgd29ya3Mgd2hlbiBhIGBSb3V0ZXJDb250ZXh0YFxuICAgKiBpcyBwYXNzZWQuICovXG4gIG1lcmdlUGFyYW1zPzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIEdldFF1ZXJ5T3B0aW9uc0FzTWFwIGV4dGVuZHMgR2V0UXVlcnlPcHRpb25zQmFzZSB7XG4gIC8qKiBUaGUgcmV0dXJuIHZhbHVlIHNob3VsZCBiZSBhIGBNYXBgIGluc3RlYWQgb2YgYSByZWNvcmQgb2JqZWN0LiAqL1xuICBhc01hcDogdHJ1ZTtcbn1cblxuZXhwb3J0IHR5cGUgR2V0UGFyYW1zT3B0aW9ucyA9IEdldFF1ZXJ5T3B0aW9uc0Jhc2UgfCBHZXRRdWVyeU9wdGlvbnNBc01hcDtcblxuLyoqIEdpdmVuIGEgY29udGV4dCwgcmV0dXJuIHRoZSBgLnJlcXVlc3QudXJsLnNlYXJjaFBhcmFtc2AgYXMgYSBgTWFwYCBvZiBrZXlzXG4gKiBhbmQgdmFsdWVzIG9mIHRoZSBwYXJhbXMuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UXVlcnkoXG4gIGN0eDogQ29udGV4dCB8IFJvdXRlckNvbnRleHQsXG4gIG9wdGlvbnM6IEdldFF1ZXJ5T3B0aW9uc0FzTWFwLFxuKTogTWFwPHN0cmluZywgc3RyaW5nPjtcbi8qKiBHaXZlbiBhIGNvbnRleHQsIHJldHVybiB0aGUgYC5yZXF1ZXN0LnVybC5zZWFyY2hQYXJhbXNgIGFzIGEgcmVjb3JkIG9iamVjdFxuICogb2Yga2V5cyBhbmQgdmFsdWVzIG9mIHRoZSBwYXJhbXMuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UXVlcnkoXG4gIGN0eDogQ29udGV4dCB8IFJvdXRlckNvbnRleHQsXG4gIG9wdGlvbnM/OiBHZXRRdWVyeU9wdGlvbnNCYXNlLFxuKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbmV4cG9ydCBmdW5jdGlvbiBnZXRRdWVyeShcbiAgY3R4OiBDb250ZXh0IHwgUm91dGVyQ29udGV4dCxcbiAgeyBtZXJnZVBhcmFtcywgYXNNYXAgfTogR2V0UGFyYW1zT3B0aW9ucyA9IHt9LFxuKTogTWFwPHN0cmluZywgc3RyaW5nPiB8IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xuICBjb25zdCByZXN1bHQ6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgaWYgKG1lcmdlUGFyYW1zICYmIGlzUm91dGVyQ29udGV4dChjdHgpKSB7XG4gICAgT2JqZWN0LmFzc2lnbihyZXN1bHQsIGN0eC5wYXJhbXMpO1xuICB9XG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGN0eC5yZXF1ZXN0LnVybC5zZWFyY2hQYXJhbXMpIHtcbiAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuICB9XG4gIHJldHVybiBhc01hcCA/IG5ldyBNYXAoT2JqZWN0LmVudHJpZXMocmVzdWx0KSkgOiByZXN1bHQ7XG59XG4iXX0=